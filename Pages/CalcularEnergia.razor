@page "/consumo-energia"
@using MudBlazor
@using System.Globalization

<MudContainer>
    <MudGrid Justify="Justify.Center">
        <MudItem>
            <MudText Typo="Typo.h4" Class="mb-3 mt-3">‚ö° Calculadora de Consumo de Energia</MudText>
        </MudItem>
    </MudGrid>

    <MudText Typo="Typo.body1">
        üåç Economizar energia el√©trica √© essencial para reduzir custos e minimizar impactos ambientais. Use nossa
        calculadora para estimar seu gasto mensal de eletricidade.
    </MudText>

    <MudGrid Class="mt-4">
        <MudItem xs="12" sm="6">
            <MudNumericField @bind-Value="Potencia" Label="Pot√™ncia do aparelho (W)" Variant="Variant.Outlined"
                Step=".1M" Adornment="Adornment.Start" AdornmentIcon="fas fa-bolt" IconSize="Size.Small" T="decimal" />
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudNumericField @bind-Value="HorasUso" Label="Horas de uso por dia (m√°x. 24h)" Variant="Variant.Outlined"
                Adornment="Adornment.Start" AdornmentIcon="fas fa-clock" IconSize="Size.Small" Min="1" Max="24" />
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudNumericField @bind-Value="DiasUso" Label="Dias de uso por m√™s" Variant="Variant.Outlined"
                Adornment="Adornment.Start" AdornmentIcon="fas fa-calendar-alt" IconSize="Size.Small" Min="1"
                Max="31" />
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudNumericField @bind-Value="TarifaEnergia" Label="Tarifa de energia (R$/kWh)" Variant="Variant.Outlined"
                Adornment="Adornment.Start" AdornmentIcon="fas fa-money-bill-wave" IconSize="Size.Small" Step=".01M"
                Format="N2" Culture="@_de" T="decimal" />
        </MudItem>
        <MudItem xs="12" Class="text-center mt-3">
            <BotaoReutilizavel OnClick="Calcular" StartIcon="fas fa-calculator" Variant="Variant.Filled"
                Color="Color.Primary">Calcular</BotaoReutilizavel>
        </MudItem>
    </MudGrid>

    <MudDivider Class="my-4" />

    <MudAlert Severity="Severity.Info" Class="mt-3" Dense="true" ContentAlignment="HorizontalAlignment.Center">
        <MudIcon Icon="fas fa-lightbulb" /> <strong>Consumo Total:</strong> @ConsumoTotal kWh/m√™s
    </MudAlert>

    <MudAlert Severity="Severity.Success" Class="mt-2" Dense="true" ContentAlignment="HorizontalAlignment.Center">
        <MudIcon Icon="fas fa-dollar-sign" /> <strong>Valor Estimado:</strong> @ValorEstimado.ToString("C")
    </MudAlert>
</MudContainer>

@code {

    public CultureInfo _de = CultureInfo.GetCultureInfo("de-DE");

    private decimal Potencia = 100; // Pot√™ncia do aparelho em Watts
    private int HorasUso = 5; // Horas de uso di√°rio
    private int DiasUso = 30; // Dias de uso por m√™s
    private decimal TarifaEnergia = 0.80m; // Tarifa de energia el√©trica (R$/kWh)
    private decimal ConsumoTotal;
    private decimal ValorEstimado;

    private void Calcular()
    {
        // Convers√£o de Watts para Quilowatts
        decimal consumoDiario = (Potencia / 1000) * HorasUso;
        ConsumoTotal = Math.Round(consumoDiario * DiasUso, 2); // kWh/m√™s
        ValorEstimado = ConsumoTotal * TarifaEnergia; // Custo total
    }
}
